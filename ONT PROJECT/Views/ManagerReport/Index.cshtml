@model IEnumerable<ONT_PROJECT.Models.Medicine>

@{
    ViewData["Title"] = "Pharmacy Manager Report";
    Layout = "_ManagerLayout";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="container py-4" style="background-color: rgba(245, 245, 245, 0.6); border-radius: 10px; padding: 20px;">
    <h2 class="mb-4 text-center">📊Stock Control Report</h2>
    <p class="text-muted text-center">
        Customize and generate detailed pharmacy stock take reports.
    </p>

    <form asp-action="GenerateReport" asp-controller="ManagerReport" method="post">
        <!-- Grouping Options -->
        <div class="mb-3">
            <label class="form-label fw-bold">📌 Group Report By</label>
            <select class="form-select" name="GroupBy" required>
                <option value="">-- Select an option --</option>
                <option value="DosageForm">Dosage Form</option>
                <option value="Schedule">Schedule</option>
                <option value="Supplier">Supplier</option>
            </select>
        </div>

        <!-- Medication Selection -->
        <div class="mb-3">
            <label class="form-label fw-bold">💊 Select Medications</label>
            <select multiple class="form-select" name="SelectedMedications">
                <option value="-1">All Medications</option>
                @foreach (var med in Model)
                {
                    <option value="@med.MedicineId">@med.MedicineName</option>
                }
            </select>
            <div class="form-text">Hold CTRL to select multiple medicine.</div>
        </div>

        <!-- Filters -->
        <div class="mb-3">
            <label class="form-label fw-bold">⚙️ Stock Level</label>
            <select class="form-select" name="StockLevel">
                <option value="all">All</option>
                <option value="low">Below Reorder</option>
                <option value="out">Out of Stock</option>
            </select>
        </div>

        <!-- Date -->
        <div class="mb-3">
            <label class="form-label fw-bold">📅 Report Date</label>
            <input type="date" name="ReportDate" class="form-control"
                   value="@DateTime.Now.ToString("yyyy-MM-dd")" />
        </div>

        <!-- Submit -->
        <div class="text-center">
            <button type="submit" class="btn btn-success px-4">📄 Generate Report</button>
        </div>
    </form>
</div>
