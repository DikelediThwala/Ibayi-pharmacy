@{
    ViewData["Title"] = "Manage Medication Stock";
    Layout = "_ManagerLayout";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-dark fw-bold"><i class="fas fa-users-cog"></i> Manage Medication Stock</h2>
    <a class="btn btn-primary shadow-sm px-4 py-2" asp-action="Create" asp-controller="B_Order">
        <i class="fas fa-user-plus me-2"></i> Order Medication
    </a>

</div>
<hr class="mb-5" style="height: 4px; background-color: #011425; border: none;" />




    <!-- Explanation Banner -->
    <div class="alert alert-info mt-3 mb-4" role="alert">
        <strong>Note:</strong>
        <span class="badge  text-dark" style="background-color: #ffe5b4;">Light orange rows</span> = Quantity is below or at reorder level. <br />
        <span class="badge bg-primary text-dark">primary rows</span> = Quantity is within 5 units of reorder level (approaching low). <br />
        White rows = Stock is sufficient.
    </div>

    <h5>Current Stock Levels</h5>

    <table class="table table-bordered text-center">
        <thead class="table-dark">
            <tr>
                <th>Medication ID</th>
                <th>Name</th>
                <th>Quantity</th>
                <th>Reorder Level</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @{
                var medications = new List<dynamic>
            {
            new { Id = "001", Name = "Paracetamol", Quantity = 25, Reorder = 15 },
            new { Id = "002", Name = "Amoxicillin", Quantity = 10, Reorder = 20 }, 
            new { Id = "003", Name = "Ibuprofen", Quantity = 21, Reorder = 20 }, 
            new { Id = "004", Name = "Cetirizine", Quantity = 45, Reorder = 35 },
            new { Id = "005", Name = "Aspirin", Quantity = 60, Reorder = 40 },
            new { Id = "006", Name = "Metformin", Quantity = 40, Reorder = 20 },
            new { Id = "007", Name = "Simvastatin", Quantity = 9, Reorder = 25 },  
            new { Id = "008", Name = "Salbutamol", Quantity = 50, Reorder = 30 }
            };
            }

            @foreach (var med in medications)
            {
                var rowClass = ""; 

                if (med.Quantity <= med.Reorder)
                {
                    rowClass = "table-warning"; 
                }
                else if (med.Quantity <= med.Reorder + 5)
                {
                    rowClass = "table-primary";
                }

                <tr class="@rowClass">
                    <td>@med.Id</td>
                    <td>@med.Name</td>
                    <td><input type="number" class="form-control text-center" value="@med.Quantity" readonly /></td>
                    <td><input type="number" class="form-control text-center" value="@med.Reorder" readonly /></td>
                    <td>
                        @if (med.Quantity <= med.Reorder)
                        {
                        <a class="btn btn-primary shadow-sm" asp-action="Create" asp-controller="B_Order">
                            <i class="fas fa-user-plus me-2"></i> Order
                        </a>
                        }
                        else
                        {
                            <span class="text-muted">Stock OK</span>
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

