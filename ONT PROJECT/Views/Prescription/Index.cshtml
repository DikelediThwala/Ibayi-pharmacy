@{
    ViewData["Title"] = "My Prescriptions";
    Layout = "_CustomerLayout";
}

@functions {
    public class PrescriptionFile
    {
        public string FileName { get; set; }
        public string FileUrl { get; set; }
    }

    List<PrescriptionFile> prescriptions = new List<PrescriptionFile>
    {
        new PrescriptionFile { FileName = "Prescription_Jan2025.pdf", FileUrl = "/prescriptions/Prescription_Jan2025.pdf" },
        new PrescriptionFile { FileName = "Prescription_Feb2025.pdf", FileUrl = "/prescriptions/Prescription_Feb2025.pdf" },
        new PrescriptionFile { FileName = "Prescription_March2025.pdf", FileUrl = "/prescriptions/Prescription_March2025.pdf" }
    };
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Your Prescriptions</h2>

    <table class="table table-bordered table-striped" id="prescriptionTable">
        <thead class="table-dark">
            <tr>
                <th>Prescription Name</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var prescription in prescriptions)
            {
                <tr>
                    <td>@prescription.FileName</td>
                    <td>
                        <a class="btn btn-primary btn-sm" href="@prescription.FileUrl" target="_blank">View</a>
                        <a class="btn btn-success btn-sm" href="@prescription.FileUrl" download>Download</a>
                        <button class="btn btn-danger btn-sm" onclick="deleteRow(this)">Delete</button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

@* @section Scripts { *@
    <script>
        function deleteRow(button) {
            if (confirm("Are you sure you want to delete this prescription?")) {
                var row = button.closest("tr");
                row.remove();
            }
        }
    </script>
}
